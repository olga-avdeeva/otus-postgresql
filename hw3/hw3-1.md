- [x] создайте новый кластер PostgresSQL 11 (на выбор - GCE, CloudSQL)
  > создала новый инстанс и установила postgresql 11 из репозитория:
  > * sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
  > * wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
  > * sudo apt-get update
  > * sudo apt-get install postgresql-11
- [x] зайдите в созданный кластер под пользователем postgres
- [x] создайте новую базу данных testdb
- [x] зайдите в созданную базу данных под пользователем postgres
- [x] создайте новую схему testnm
- [x] создайте новую таблицу t1 с одной колонкой c1 типа integer
- [x] вставьте строку со значением c1=1
- [x] создайте новую роль readonly
- [x] дайте новой роли право на подключение к базе данных testdb
- [x] дайте новой роли право на использование схемы testnm
- [x] дайте новой роли право на select для всех таблиц схемы testnm
- [x] создайте пользователя testread с паролем test123
- [x] дайте поль readonly пользователю testread
- [x] зайдите под пользователем testread в базу данных testdb
- [x] сделайте select * from t1;
- [x] получилось? (могло если вы делали сами не по шпаргалке и не упустили один существенный момент про который позже)
  > прочитать данные из таблицы не получилось: ERROR:  permission denied for table t1
- [x] напишите что именно произошло в тексте домашнего задания
- [x] у вас есть идеи почему? ведь права то дали?
  > по заданию права были выданы роли readonly на SELECT для всех таблиц схемы testnm. Далее роль readonly выдали пользователю testread => у пользователя testread есть права на чтение из всех таблиц схемы testnm. По заданию таблица t1 создается без уточнения схемы, следовательно по умолчанию она создалась в схеме public. Т.к. прав на схему public нет, прочитать данные из таблицы не удалось.
- [x] посмотрите на список таблиц
- [x] подсказка в шпаргалке под пунктом 20
- [x] а почему так получилось с таблицей (если делали сами и без шпаргалки то может у вас все нормально)
- [x] вернитесь в базу данных testdb под пользователем postgres
- [x] удалите таблицу t1
- [x] создайте ее заново но уже с явным указанием имени схемы testnm
- [x] вставьте строку со значением c1=1
- [x] зайдите под пользователем testread в базу данных testdb
- [x] сделайте select * from testnm.t1;
- [x] получилось?
- [x] есть идеи почему? если нет - смотрите шпаргалку
- [x] как сделать так чтобы такое больше не повторялось? если нет идей - смотрите шпаргалку
  > не получилось, т.к. таблица была создана под пользователем/ролью postgres, следовательно ее владельцем является postgres. Роль postgres не является членом группы ролей readonly, следовательно прав на чтение из этой таблицы не будет. Чтобы прочитать данные из таблицы нужно выдать права на чтение для роли readonly, либо для роли testread, либо еще раз выдать права на чтение всех  таблиц в схеме testnm. Чтобы такое не повторялось можно добавить пользователя postgres в группу readonly.
- [x] сделайте select * from testnm.t1;
- [x] получилось?
- [x] есть идеи почему? если нет - смотрите шпаргалку
  > получилось после следующих действий:
  > * добавила роль postgres в группу readonly: grant readonly to postgres
  > * сделала еще раз grant select on all tables in schema testnm TO readonly
- [x] сделайте select * from testnm.t1;
- [x] получилось?
- [x] ура!
  > сделала как написано в шпаргалке, все получилось
- [x] теперь попробуйте выполнить команду create table t2(c1 integer); insert into t2 values (2);
- [x] а как так? нам же никто прав на создание таблиц и insert в них под ролью readonly?
  > создать таблицу получилось т.к. все роли по-умолчанию неявно являются членами группы public, следовательно они могут создавать таблицы в схеме public
- [x] есть идеи? если нет - смотрите шпаргалку
- [x] если вы справились сами то расскажите что сделали и почему, если смотрели шпаргалку - объясните что сделали и почему выполнив указанные в ней команды
- [x] теперь попробуйте выполнить команду create table t3(c1 integer); insert into t2 values (2);
- [x] расскажите что получилось и почему
  > находясь в базе под пользователем testread можно создавать объекты и работать с ними в схеме public. После удаления прав на создание объектов в схеме public и удаления всех пользователей из группы public создать таблицу t3 не получится. Однако вставить данные в существующую таблицу t2 получится, т.к. в search_path осталась схема public.
